version: 1.0.{build}
image: Visual Studio 2022

# Build adımları
build_script:
  - dotnet restore
  - dotnet build --no-restore

# Test adımları
test_script:
  - ps: |
      Write-Host "🧪 Testler çalıştırılıyor..."
      try {
          dotnet test "CalculatorAppToLearnCICDPipeline.Tests" --no-build `
              --logger "trx;LogFileName=test_results.trx" `
              --logger "html;LogFileName=test_report.html" `
              --results-directory "CalculatorAppToLearnCICDPipeline.Tests\TestResults"
      } catch {
          Write-Host "⚠ Testler başarısız oldu, build devam ediyor..."
      }

# Artifacts: test sonuçları ve build DLL’leri
artifacts:
  - path: CalculatorAppToLearnCICDPipeline.Tests\TestResults\**
    name: TestResults
  - path: CalculatorAppToLearnCICDPipeline\bin\Debug\net8.0\**
    name: BuildDLLs
